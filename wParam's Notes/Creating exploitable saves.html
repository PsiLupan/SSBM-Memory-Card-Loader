
<!-- saved from url=(0036)http://wparam.com/ssbm/makesave.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><title>Creating exploitable saves</title></head>
<body>
<h1>Creating exploitable saves</h1><br>
<p>Having a known buffer overflow in smash brothers that we can exploit is great, but it's hardly worth anything if it's impossible to use it for anything.  With that in mind, here are the tools I've made for converting either .dol files or POKE scripts (like the <a href="http://wparam.com/ssbm/mod.html">crazy mod</a>) into a different form of POKE script suitable for copying into smash brothers.  You will need to be able to run gcnrd in order to create a corrupted save, but once the save is made, gcnrd isn't needed anymore.  You can even copy a corrupted save to a friend and they can use it without any sort of gcnrd or special hardware at all (aside from a memory card that doesn't have any truly important data on it, of course.)</p>
<p>There are two tools, one that converts .dol files and one that converts POKE scripts.  Both of them output the same thing, so the procedure for getting both of them into smash brothers is below.</p>

<p><b>POKE script converter</b><br>
The poke script converter takes as input a text file containing POKE commands intended for gcnrd.  As output, it produces a POKE script that writes the right values to the right places to create an exploitable save.  When the exploit is triggered, the POKE commands from the input script are executed, the memory card area is cleared, and the "Hack data" save file is loaded (or created if it doesn't exist).<br><br>
Usage:<br>
mkssbm [input text file] [output text file]<br><br>
The program should run without any warning or error messages.  It outputs the number of POKE commands it read from the input script.<br><br>
<a href="http://wparam.com/ssbm/mkssbm.zip">Download</a> poke script converter.</p>

<p><b>DOL converter</b><br>
The dol converter takes any .dol file and outputs a POKE script that will load said .dol onto the memory card.  Keep in mind that the space is limited to something in the general area of 50K, so a .dol bigger than that will definitely not work, and if the .dol happens to locate code in the smash brothers memory card region, bad things will happen when it is run.  Barring either of these scenarios, however, when the exploit is triggered, the .dol is run, just as if it had been run by psoload, sdload, arload, or whatver other methods people are using these days.  Yes, gcnrd can be run this way.<br><br>
This program requires an extra file (which is included in the zip) called level2.bin.  This file was compiled from the source of a version of Samson's AR loader.  It uses only the parts required to relocate a .dol to the proper location and then run it.  Hopefully nobody will hate me too much for re-using this code.<br><br>
Usage:<br>
mkdoload [input dol file] level2.bin [output text file]<br><br>
Be advised: no limit checking is imposed; if you give a .dol file that is too big, this program will not complain, and will output a POKE script that will fail when you try to run it.<br><br>
<a href="http://wparam.com/ssbm/mkdoload.zip">Download</a> dol file converter.</p>

<p><b>Getting it into a memcard save</b><br>
The process of taking the POKE script output by one of these programs and getting it into smash brothers is fairly straightforward.
</p><ol>
<li>Delete the smash brothers save from your memory card.  (Not strictly required, but I think it's a good idea to make sure there's no leftover cruft to mess things up.)
</li><li>Boot up gcnrd and load smash brothers
</li><li>Say 'ok' when smash brothers asks if you want to create a save file.  If it says it failed, keep retrying until you get it.
</li><li>Press start when the opening movie is displayed so that you're looking at the title screen that says "Press start"
</li><li>Hit the pause button in the gui or issue the pause command to halt the game
</li><li>Open the file output by one of the two above programs in notepad, select all of the text, and hit copy
</li><li>Switch to the gcnrd window (use the 'show gcnrd' button in the gui if it isn't visible) and paste the text.  (A right click should do it, or you may have to pick paste or edit-&gt;paste from a menu)
</li><li>Wait a few seconds for the text to go through.
</li><li>I recommend you do the paste operation several times, just in case a packet was lost in transmission.  I don't know how possible it is for this to happen, but I always paste three times as a precaution when I'm pasting really long scripts like this.
</li><li>Unpause the game and press start
</li><li>Note the 'saving' icon in the corner of the screen
</li><li>I suggest hitting B and pressing start a few more times, just to make sure gcnrd didn't interfere with the save operation
</li><li>That's it!  You should be able to power off the gamecube, power it back on directly into smash brothers, go to vs. mode-&gt;name entry and see immediate results.
</li></ol>
<p></p>

<p><b>A few things to note:</b><br>
When the save is first created, it will have a name of something like "SSBM wParam Master Save".  This text is there as a signal that the file is definitely still in the state it was in when first created.  I recommend you copy it off to a backup memory card before you load it the first time, so that you can restore it easily if need be.  Once you boot up smash brothers for the first time, this name reverts back to the default.  It will still work as before, it's just that you can't tell by looking in the gamecube bios whether it's a save with a payload or a regular save.<br><br>
The reason I recommend making a backup is that these save files are not invulnerable.  If you do too much in the game before you go to name entry and trigger the exploit (such as trying to view records or something) you may end up changing the data on the save, causing it to stop working.  If that happens, you can just copy the master save back over and keep on going.<br><br>
If you want to change the text that appears to signal a pristine file, you can edit the POKE script output by one of the tools.  The lines appear close to the bottom, and POKE into addresses starting at 803BAC1C.  Any unused characters should be replaced by spaces (0x20).  A null terminator is not required.
</p>


</body></html>